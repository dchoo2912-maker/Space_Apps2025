<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Mission Vista ‚Äî Solar System Explorer</title>

<!-- Tailwind (UI only) -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<!-- Three.js -->
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<style>
  :root{--bg:#0b1020;--ink:#eaf2ff;}
  html,body{margin:0;height:100%;background:radial-gradient(100% 80% at 50% 0%, #0a0a20 0%, #000 80%);color:var(--ink);font-family:Inter,sans-serif;}
  #planet-canvas{width:100%;height:100%;display:block;}
  .starfield{position:fixed;inset:0;z-index:-10;background:radial-gradient(circle at 50% 20%, #1a1a3d, #000);}
  header{backdrop-filter:blur(10px);background:rgba(10,10,30,.4);position:sticky;top:0;z-index:50;}
  .btn{padding:.4rem .7rem;border-radius:.6rem;background:rgba(120,130,255,.14);border:1px solid rgba(120,130,255,.25);}
  .btn:hover{background:rgba(120,130,255,.25);}
  /* Inspect overlay */
  #inspectOverlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.75);z-index:10000;}
  #inspectPanel{width:90%;max-width:900px;height:80%;background:#0a0f24;border-radius:12px;display:flex;flex-direction:column;}
  #inspectHeader{padding:8px 12px;border-bottom:1px solid rgba(255,255,255,.15);display:flex;justify-content:space-between;align-items:center;}
  #inspectBody{flex:1;position:relative;}
  #inspectCanvas{position:absolute;inset:0;}
</style>
</head>
<body>
<div class="starfield"></div>

<header class="p-4 flex justify-between items-center">
  <h1 class="text-xl font-bold">MISSION VISTA</h1>
  <nav class="space-x-4">
    <button data-goto="home" class="hover:text-blue-400">Home</button>
    <button data-goto="explorer" class="hover:text-blue-400">Solar System</button>
  </nav>
</header>

<!-- HOME -->
<main id="home" class="block">
  <section class="min-h-screen flex flex-col items-center justify-center text-center">
    <h2 class="text-4xl md:text-5xl font-bold mb-4">See Beyond Pixels</h2>
    <p class="mb-8 max-w-xl text-gray-300">Mission Vista turns real NASA datasets into immersive visual experiences.</p>
    <button data-goto="explorer" class="btn">üöÄ Enter the Solar System</button>
  </section>
</main>

<!-- EXPLORER -->
<section id="explorer" class="hidden relative">
  <div class="absolute top-4 left-1/2 -translate-x-1/2 flex gap-4 bg-black/40 px-3 py-2 rounded-xl z-10">
    <select id="bodySelect" class="bg-transparent border border-slate-600 rounded px-2 text-sm">
      <option>Mercury</option><option>Venus</option><option selected>Earth</option><option>Moon</option>
      <option>Mars</option><option>Jupiter</option><option>Saturn</option><option>Uranus</option><option>Neptune</option>
    </select>
    <button id="inspectBtn" class="btn">Inspect</button>
    <button data-goto="home" class="btn">‚Üê Home</button>
  </div>
  <canvas id="planet-canvas"></canvas>
</section>

<!-- Inspect overlay -->
<div id="inspectOverlay">
  <div id="inspectPanel">
    <div id="inspectHeader">
      <span id="inspectTitle">Inspect</span>
      <div class="space-x-2">
        <label class="text-xs"><input id="spinToggle" type="checkbox"> Spin</label>
        <button id="resetInspectCam" class="btn">Reset</button>
        <button id="closeInspect" class="btn">Close</button>
      </div>
    </div>
    <div id="inspectBody"><div id="inspectCanvas"></div></div>
  </div>
</div>

<script>
// SPA nav
function showSection(id){
  document.getElementById('home').classList.toggle('hidden', id!=='home');
  document.getElementById('explorer').classList.toggle('hidden', id!=='explorer');
}
document.querySelectorAll('[data-goto]').forEach(btn=>{
  btn.addEventListener('click',()=>showSection(btn.getAttribute('data-goto')));
});

// Three.js setup
const canvas=document.getElementById('planet-canvas');
const renderer=new THREE.WebGLRenderer({canvas,antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(Math.min(devicePixelRatio,2));
renderer.outputColorSpace=THREE.SRGBColorSpace;
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,5000);
camera.position.set(0,30,110);
const controls=new THREE.OrbitControls(camera,canvas);
controls.enableDamping=true;
scene.add(new THREE.AmbientLight(0xffffff,0.4));
const sunLight=new THREE.PointLight(0xffffff,2,0);sunLight.position.set(0,0,0);scene.add(sunLight);

// textures
const TEXSRC={
  sun:"textures/sun.jpg",mercury:"textures/mercury.jpg",venus:"textures/venus.jpg",
  earth:"textures/earth.jpg",moon:"textures/moon.jpg",mars:"textures/mars.jpg",
  jupiter:"textures/jupiter.jpg",saturn:"textures/saturn.jpg",saturnRing:"textures/saturn_ring.png",
  uranus:"textures/uranus.jpg",neptune:"textures/neptune.jpg"
};
const texLoader=new THREE.TextureLoader();

// sun
const sun=new THREE.Mesh(new THREE.SphereGeometry(3,64,64),new THREE.MeshBasicMaterial({map:texLoader.load(TEXSRC.sun)}));
scene.add(sun);

// planets
const SPIN_SCALE=0.5/(24*3600);
const planetDefs=[
  {name:'Mercury',r:0.38,d:6,s:0.04,tilt:0.03,day:1407.5,key:'mercury'},
  {name:'Venus',r:0.95,d:9,s:0.015,tilt:177.4,day:-5832.5,key:'venus'},
  {name:'Earth',r:1,d:12,s:0.01,tilt:23.4,day:24,key:'earth'},
  {name:'Mars',r:0.53,d:16,s:0.0053,tilt:25.2,day:24.6,key:'mars'},
  {name:'Jupiter',r:1.5,d:26,s:0.00084,tilt:3.1,day:9.9,key:'jupiter'},
  {name:'Saturn',r:1.2,d:35,s:0.00034,tilt:26.7,day:10.7,key:'saturn'},
  {name:'Uranus',r:1,d:45,s:0.00012,tilt:97.8,day:-17.2,key:'uranus'},
  {name:'Neptune',r:1,d:55,s:0.00006,tilt:28.3,day:16.1,key:'neptune'}
];
const planets=[],ringsToFollow=[],planetMeshesByName={};
function addPlanet(def){
  const mat=new THREE.MeshPhongMaterial({color:0xffffff});
  const mesh=new THREE.Mesh(new THREE.SphereGeometry(def.r,64,48),mat);
  mesh.rotation.z=THREE.MathUtils.degToRad(def.tilt);
  mesh.userData={name:def.name,d:def.d,theta:Math.random()*Math.PI*2,s:def.s,
    spin:(2*Math.PI/(Math.abs(def.day)*3600))*(def.day<0?-1:1)*SPIN_SCALE};
  scene.add(mesh); planets.push(mesh); planetMeshesByName[def.name]=mesh;
  texLoader.load(TEXSRC[def.key],t=>{t.colorSpace=THREE.SRGBColorSpace;mesh.material.map=t;mesh.material.needsUpdate=true;});
  if(def.name==='Saturn'){
    const ring=new THREE.Mesh(new THREE.RingGeometry(def.r*2.1,def.r*3.5,128),
      new THREE.MeshBasicMaterial({map:texLoader.load(TEXSRC.saturnRing),transparent:true,side:THREE.DoubleSide}));
    ring.rotation.x=-Math.PI/2;scene.add(ring);ringsToFollow.push({ring,parent:mesh});
  }
}
planetDefs.forEach(addPlanet);

// moon
const moon=new THREE.Mesh(new THREE.SphereGeometry(0.27,64,48),new THREE.MeshPhongMaterial());
moon.userData={name:'Moon',dist:2.5,theta:Math.random()*Math.PI*2,s:0.08,spin:(2*Math.PI/(655.7*3600))*SPIN_SCALE};
scene.add(moon); texLoader.load(TEXSRC.moon,t=>{moon.material.map=t;moon.material.needsUpdate=true;});

// animate
const clock=new THREE.Clock();
function animate(){
  requestAnimationFrame(animate);
  const dt=clock.getDelta();
  planets.forEach(p=>{
    p.userData.theta+=p.userData.s*dt*60;
    p.position.set(p.userData.d*Math.cos(p.userData.theta),0,p.userData.d*Math.sin(p.userData.theta));
    p.rotation.y+=p.userData.spin*dt;
  });
  ringsToFollow.forEach(({ring,parent})=>ring.position.copy(parent.position));
  const earth=planetMeshesByName['Earth'];
  moon.userData.theta+=moon.userData.s*dt*60;
  moon.position.set(earth.position.x+moon.userData.dist*Math.cos(moon.userData.theta),0,earth.position.z+moon.userData.dist*Math.sin(moon.userData.theta));
  moon.rotation.y+=moon.userData.spin*dt;
  controls.update(); renderer.render(scene,camera);
}
animate();

// inspect overlay
const overlay=document.getElementById('inspectOverlay');
const inspWrap=document.getElementById('inspectCanvas');
let inspRenderer,inspScene,inspCam,inspMesh,inspRAF;
function openInspect(name){
  overlay.style.display='flex';
  inspWrap.innerHTML='';
  inspRenderer=new THREE.WebGLRenderer({antialias:true});inspRenderer.setSize(inspWrap.clientWidth,inspWrap.clientHeight);
  inspRenderer.outputColorSpace=THREE.SRGBColorSpace;
  inspWrap.appendChild(inspRenderer.domElement);
  inspScene=new THREE.Scene();inspScene.add(new THREE.AmbientLight(0xffffff,.6));
  inspCam=new THREE.PerspectiveCamera(60,inspWrap.clientWidth/inspWrap.clientHeight,.1,2000);inspCam.position.set(0,0,3);
  inspMesh=new THREE.Mesh(new THREE.SphereGeometry(1,64,48),new THREE.MeshPhongMaterial({color:0xffffff}));
  inspScene.add(inspMesh);
  texLoader.load(TEXSRC[name.toLowerCase()]||TEXSRC.earth,t=>{inspMesh.material.map=t;inspMesh.material.needsUpdate=true;});
  function tick(){inspRAF=requestAnimationFrame(tick);inspRenderer.render(inspScene,inspCam);}tick();
}
document.getElementById('inspectBtn').onclick=()=>openInspect(document.getElementById('bodySelect').value);
document.getElementById('closeInspect').onclick=()=>{overlay.style.display='none';cancelAnimationFrame(inspRAF);};

showSection('home');
</script>
</body>
</html>

