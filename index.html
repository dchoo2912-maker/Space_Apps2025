<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Mission Vista ‚Äî Solar System Explorer</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<!-- Three.js -->
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<style>
  :root{--bg:#0b1020;--ink:#eaf2ff}
  html,body{height:100%;margin:0;background: radial-gradient(100% 80% at 50% 0%, #0a0a20 0%, #000 80%);
            color:var(--ink);font-family: Inter, sans-serif;}
  .starfield{position:fixed; inset:0; z-index:-10;
             background:radial-gradient(circle at 50% 20%, #1a1a3d, #000);
             animation: stars 200s linear infinite;}
  @keyframes stars{from{background-position:0 0;} to{background-position:10000px 10000px;}}
  .btn{padding:.45rem .65rem;border-radius:.75rem;font-size:.85rem;
       background: rgba(120,130,255,.14);border:1px solid rgba(120,130,255,.25);}
  .btn:hover{background: rgba(120,130,255,.22)}
  .btn-primary{background: rgba(123,140,255,.25);border-color: rgba(123,140,255,.5)}
  #planet-canvas{width:100%;height:100%;display:block}
  #inspectOverlay{position:fixed; inset:0; background:rgba(0,0,0,.7);
                  display:none; align-items:center; justify-content:center; z-index:99999;}
  #inspectPanel{width:min(92vw, 1100px); height:min(86vh, 720px); background:#0a0f24;
                border:1px solid rgba(255,255,255,.12); border-radius:16px; display:flex; flex-direction:column;}
  #inspectHeader{display:flex; align-items:center; justify-content:space-between; gap:.75rem;
                 padding:10px 14px; border-bottom:1px solid rgba(255,255,255,.12);}
  #inspectBody{flex:1; position:relative; background:#000; border-radius:0 0 16px 16px; overflow:hidden;}
  #inspectCanvas{position:absolute; inset:0;}
</style>
</head>
<body>
<div class="starfield"></div>

<header class="p-6 flex justify-between items-center">
  <h1 class="text-2xl font-bold tracking-wider">MISSION VISTA</h1>
  <nav class="space-x-6">
    <button data-goto="home" class="hover:text-blue-400">Home</button>
    <button data-goto="explorer" class="hover:text-blue-400">Solar System</button>
  </nav>
</header>

<!-- Home -->
<main id="home" class="block">
  <section class="min-h-screen flex flex-col items-center justify-center text-center px-6">
    <h2 class="text-5xl md:text-6xl font-bold mb-6">See Beyond Pixels</h2>
    <p class="max-w-2xl text-lg text-gray-300 mb-10">
      Mission Vista turns real NASA datasets into immersive visual experiences.
    </p>
    <button data-goto="explorer" class="btn btn-primary">üöÄ Enter the Solar System ‚Üí</button>
  </section>
</main>

<!-- Explorer -->
<section id="explorer" class="hidden relative">
  <div class="fixed top-3 left-1/2 -translate-x-1/2 rounded-2xl px-3 py-2 z-[9999] flex items-center gap-3"
       style="background:rgba(20,20,40,.6);backdrop-filter:blur(8px);border:1px solid rgba(120,120,200,.15)">
    <button data-goto="home" class="btn">‚Üê Home</button>
    <div class="font-semibold tracking-wide">Space Explorer</div>
    <div class="ml-2 flex items-center gap-2">
      <label class="text-xs opacity-80" for="bodySelect">Body</label>
      <select id="bodySelect" class="bg-transparent border border-slate-600 rounded-xl p-1 px-2 text-xs">
        <option>Sun</option><option>Mercury</option><option>Venus</option><option selected>Earth</option>
        <option>Moon</option><option>Mars</option><option>Jupiter</option>
        <option>Saturn</option><option>Uranus</option><option>Neptune</option>
      </select>
    </div>
    <button id="inspectBtn" class="btn" title="Inspect close-up">Inspect</button>
  </div>

  <canvas id="planet-canvas"></canvas>
</section>

<!-- Inspect overlay -->
<div id="inspectOverlay">
  <div id="inspectPanel">
    <div id="inspectHeader">
      <div class="title font-semibold" id="inspectTitle">Inspect</div>
      <div class="flex items-center gap-2">
        <label class="text-xs flex items-center gap-2"><input id="spinToggle" type="checkbox"/> Spin</label>
        <button id="resetInspectCam" class="btn">Reset view</button>
        <button id="closeInspect" class="btn">Close</button>
      </div>
    </div>
    <div id="inspectBody"><div id="inspectCanvas"></div></div>
  </div>
</div>

<footer class="p-6 text-center text-gray-500 text-sm">
  Built for the NASA Space Apps Challenge üöÄ
</footer>

<script>
/* Simple SPA navigation */
function showSection(id){
  document.getElementById('home').classList.toggle('hidden', id!=='home');
  document.getElementById('explorer').classList.toggle('hidden', id!=='explorer');
}
document.querySelectorAll('[data-goto]').forEach(el=>el.addEventListener('click',()=>showSection(el.getAttribute('data-goto'))));

/* Three.js main scene */
const canvas=document.getElementById('planet-canvas');
const renderer=new THREE.WebGLRenderer({antialias:true,canvas});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(Math.min(devicePixelRatio||1,2));
if('outputColorSpace'in renderer)renderer.outputColorSpace=THREE.SRGBColorSpace;else renderer.outputEncoding=THREE.sRGBEncoding;
renderer.toneMapping=THREE.ACESFilmicToneMapping;

const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,.1,5000);
camera.position.set(0,30,110);
const controls=new THREE.OrbitControls(camera,canvas);
controls.enableDamping=true;controls.dampingFactor=0.06;

scene.add(new THREE.AmbientLight(0xffffff,0.4));
scene.add(new THREE.PointLight(0xffffff,2.1,0));

const loader=new THREE.TextureLoader();
const TEXSRC={
  sun:"textures/sun.jpg",
  mercury:"textures/mercury.jpg",venus:"textures/venus.jpg",earth:"textures/earth.jpg",
  moon:"textures/moon.jpg",mars:"textures/mars.jpg",jupiter:"textures/jupiter.jpg",
  saturn:"textures/saturn.jpg",saturnRing:"textures/saturn_ring.png",
  uranus:"textures/uranus.jpg",neptune:"textures/neptune.jpg"
};

/* Planets + Sun */
const planetDefs=[
  {name:'Sun', radius:3, dist:0, orbitSpeed:0, tiltDeg:7.25, key:'sun', spinHours:609.12},
  {name:'Mercury', radius:.38, dist:5, orbitSpeed:.04, tiltDeg:.03, key:'mercury', spinHours:1407.5},
  {name:'Venus', radius:.95, dist:7, orbitSpeed:.015, tiltDeg:177.4, key:'venus', spinHours:-5832.5},
  {name:'Earth', radius:1, dist:10, orbitSpeed:.01, tiltDeg:23.4, key:'earth', spinHours:24},
  {name:'Moon', radius:.27, dist:12, orbitSpeed:.08, tiltDeg:6.7, key:'moon', spinHours:655.7},
  {name:'Mars', radius:.53, dist:15, orbitSpeed:.0053, tiltDeg:25.2, key:'mars', spinHours:24.6},
  {name:'Jupiter', radius:1.5, dist:25, orbitSpeed:.00084, tiltDeg:3.1, key:'jupiter', spinHours:9.9},
  {name:'Saturn', radius:1.2, dist:35, orbitSpeed:.00034, tiltDeg:26.7, key:'saturn', spinHours:10.7},
  {name:'Uranus', radius:1, dist:45, orbitSpeed:.00012, tiltDeg:97.8, key:'uranus', spinHours:-17.2},
  {name:'Neptune', radius:1, dist:55, orbitSpeed:.00006, tiltDeg:28.3, key:'neptune', spinHours:16.1}
];

const planets=[], rings=[];
const SPIN_SCALE=0.5/(24*3600);

planetDefs.forEach(def=>{
  const mesh=new THREE.Mesh(new THREE.SphereGeometry(def.radius,64,48),new THREE.MeshPhongMaterial());
  mesh.rotation.z=THREE.MathUtils.degToRad(def.tiltDeg);
  mesh.userData={theta:Math.random()*Math.PI*2,dist:def.dist,orbitSpeed:def.orbitSpeed,
                 spinRadPerSec:(2*Math.PI/(Math.abs(def.spinHours)*3600))*(def.spinHours<0?-1:1)*SPIN_SCALE};
  if(def.dist>0)mesh.position.set(def.dist*Math.cos(mesh.userData.theta),0,def.dist*Math.sin(mesh.userData.theta));
  loader.load(TEXSRC[def.key],t=>{t.colorSpace=THREE.SRGBColorSpace;mesh.material.map=t;mesh.material.needsUpdate=true;});
  scene.add(mesh); planets.push({def,mesh});
  if(def.name==='Saturn'){
    const ring=new THREE.Mesh(new THREE.RingGeometry(def.radius*2.1,def.radius*3.5,128),
                              new THREE.MeshBasicMaterial({map:loader.load(TEXSRC.saturnRing),transparent:true,side:THREE.DoubleSide}));
    ring.rotation.x=-Math.PI/2;ring.position.copy(mesh.position);scene.add(ring);rings.push({ring,parent:mesh});
  }
});

/* Animate */
const clock=new THREE.Clock();
function animate(){
  requestAnimationFrame(animate);
  const dt=clock.getDelta();
  planets.forEach(({def,mesh})=>{
    if(def.dist>0){ mesh.userData.theta+=def.orbitSpeed*dt*60;
      mesh.position.set(def.dist*Math.cos(mesh.userData.theta),0,def.dist*Math.sin(mesh.userData.theta)); }
    mesh.rotation.y+=mesh.userData.spinRadPerSec*dt;
  });
  rings.forEach(({ring,parent})=>ring.position.copy(parent.position));
  controls.update();renderer.render(scene,camera);
}
animate();

/* Inspect overlay */
const insp=document.getElementById('inspectOverlay');
const inspCanvasWrap=document.getElementById('inspectCanvas');
let inspRenderer,inspScene,inspCam,inspMesh,inspRings=null,inspRAF=0;
document.getElementById('inspectBtn').addEventListener('click',()=>{
  const name=document.getElementById('bodySelect').value;
  openInspect(name);
});
document.getElementById('closeInspect').addEventListener('click',()=>{insp.style.display='none';cancelAnimationFrame(inspRAF);});
document.getElementById('resetInspectCam').addEventListener('click',()=>{
  const name=document.getElementById('inspectTitle').textContent.replace('Inspect: ','');
  openInspect(name);
});

function openInspect(name){
  insp.style.display='flex';
  document.getElementById('inspectTitle').textContent="Inspect: "+name;
  if(!inspRenderer){
    inspRenderer=new THREE.WebGLRenderer({antialias:true});
    inspRenderer.setSize(inspCanvasWrap.clientWidth,inspCanvasWrap.clientHeight);
    inspCanvasWrap.appendChild(inspRenderer.domElement);
    inspScene=new THREE.Scene();inspScene.add(new THREE.AmbientLight(0xffffff,.7));
    inspCam=new THREE.PerspectiveCamera(60,inspCanvasWrap.clientWidth/inspCanvasWrap.clientHeight,.1,2000);
  }
  if(inspMesh){inspScene.remove(inspMesh);inspMesh.geometry.dispose();inspMesh.material.dispose();}
  if(inspRings){inspScene.remove(inspRings);inspRings.geometry.dispose();inspRings.material.dispose();inspRings=null;}

  const scaleMap={Sun:5,Mercury:.38,Venus:.95,Earth:1,Moon:.27,Mars:.53,Jupiter:1.5,Saturn:1.2,Uranus:1,Neptune:1};
  const radius=scaleMap[name]||1;
  inspMesh=new THREE.Mesh(new THREE.SphereGeometry(1,128,96),new THREE.MeshPhongMaterial());
  inspMesh.scale.setScalar(radius);inspScene.add(inspMesh);

  const key=(name==='Moon')?'moon':name.toLowerCase();
  loader.load(TEXSRC[key]||TEXSRC.earth,t=>{t.colorSpace=THREE.SRGBColorSpace;inspMesh.material.map=t;inspMesh.material.needsUpdate=true;});

  if(name==='Saturn'){const ring=new THREE.Mesh(new THREE.RingGeometry(radius*2.1,radius*3.5,256),
    new THREE.MeshBasicMaterial({map:loader.load(TEXSRC.saturnRing),transparent:true,side:THREE.DoubleSide}));
    ring.rotation.x=-Math.PI/2;inspScene.add(ring);inspRings=ring;}

  inspCam.position.set(0,radius*0.8,radius*3);
  inspCam.lookAt(0,0,0);

  cancelAnimationFrame(inspRAF);
  (function tick(){
    inspRAF=requestAnimationFrame(tick);
    if(document.getElementById('spinToggle').checked) inspMesh.rotation.y+=0.01;
    inspRenderer.render(inspScene,inspCam);
  })();
}

/* Start on Home */
showSection('home');
</script>
</body>
</html>





